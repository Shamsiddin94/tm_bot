<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/core}">
<th:block layout:fragment="title">
    Fayl yuborish
</th:block>

<th:block layout:fragment="styles">

</th:block>


<div layout:fragment="page_content">

    <div class="box box-info">
        <div class="box-header bg-light-blue-gradient with-border text-center">

                <h3 class="box-title text-bold ">Fayl yuborish</h3>

        </div>
        <form th:action="${savePath}" class="form-horizontal" th:method="post" th:object="${attachmentRequest}"
              enctype="multipart/form-data">
            <div class="box-body">
                <div th:if="${result.getSuccess()}">
                    <div class="alert  alert-dismissible aler"   th:classappend="${result.getType()}?'alert-success':'alert-warning'">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                        <h4><i class="icon fa fa-warning"></i> Ogohlantirish!</h4>
                        <p th:text="${result.message}"></p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-6">


                        <div class="form-group">
                            <label for="mazmuni" class="col-sm-2 control-label">Fayl nomi</label>

                            <div class="col-sm-10">
                <textarea th:field="*{mazmuni}" class="form-control" id="mazmuni" cols="4" rows="3" placeholder="Qisqa fayl nomini yozing....">
                </textarea>
                                <span class="text-red" th:if="${#fields.hasErrors('mazmuni')}"
                                      th:errors="*{mazmuni}"></span>

                            </div>
                        </div>


                    </div>

                    <div class="col-xs-6">



                        <div class="form-group">
                            <label for="files" class="col-sm-2 control-label">Faylni tanlang</label>

                     <!--       <div class="col-sm-10">

                                <label class="file-label btn btn-primary">
                                    <input  type="file" class="file-input" style="display: none" th:field="*{files}" id="files" multiple>
                                    <span class="file-cta">
                             <span class="file-icon">
                              <i class="fa fa-upload"></i>
                            </span>
                           <span class="file-label">
                           Fayl yuklash
                                </span>
                                   </span>
                                </label>

                                <ul class="list-group">
                                    <li class="list-group-item " id="upload_list">

                                    </li>
                                </ul>


                                <span class="text-red" th:if="${#fields.hasErrors('files')}" th:errors="*{files}"></span>

                            </div>-->

                            <div class="col-sm-10">
                                <input type="file" class="form-control" th:field="*{files}" id="files" multiple>
                                <span class="text-red" th:if="${#fields.hasErrors('files')}" th:errors="*{files}"></span>
                            </div>


                        </div>


                    </div>
                </div>


            </div>

            <div class="box-footer">
                <a href="/telegram/send" class="btn btn-info ">Oldingi saxifa</a>
                <button type="submit" class="btn btn-success pull-right">Saqlash</button>
            </div>
        </form>
    </div>


</div>

<th:block layout:fragment="scripts">

   <!-- <script type="text/javascript" >
        jQuery(document).ready(function($){
            var max = 3;
            var replaceMe = function(){
                var obj = $(this);
                if($("input[type='file']").length > max)
                {
                    alert('Fayl soni 3 tadan oshmasligi kerak');
                    obj.val("");
                    return false;
                }
                $(obj).css({'position':'absolute','left':'-9999px','display':'none'}).parent().prepend(

                    '<input class="file-input" style="display: none" type="file" name="'+obj.attr('name')+'"/>'

                )
                $('#upload_list').append('<div class="panel" style="margin-bottom:0px;border-radius: 0px">'
                    +'<span>'+obj.val().split(/(\\|\/)/g).pop()+'</span>'+
                    '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="btn btn-danger pull-right btn-sm" type="button" value="Ð¥"/></div>'

                );
                $("input[type='file']").change(replaceMe);
                $("input[type='button']").click(function(){
                    $(this).parent().remove();
                    $(obj).remove();
                    return false; //safari fixes
                });
            }
            $("input[type='file']").change(replaceMe);
        });


    </script>-->


</th:block>

</html>